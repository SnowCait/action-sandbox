name: Sparse checkout

on:
  push:
    paths:
      - .github/workflows/sparse-checkout.yml
      - .github/sparse-checkout/action.yml
  workflow_dispatch:

jobs:
  local:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
  
      # 1st
      - uses: ./.github/sparse-checkout/
        with:
          patterns: 'docs packer'
          path: sparse
      - run: ls -l sparse/

#       # 2nd
#       - uses: ./.github/sparse-checkout/
#         with:
#           patterns: 'docs packer'
#           path: sparse
#       - run: ls -l sparse/

      # sha
      - uses: ./.github/sparse-checkout/
        with:
          patterns: 'docs packer'
          path: sha
          ref: 1068da213d7ecfae787d21630bc0955e31a6659a
      - run: ls -l sparse/

      # another
      - uses: ./.github/sparse-checkout/
        with:
          repository: snow-actions/tweet
          patterns: 'src'
          path: tweet
          ref: main
      - run: ls -l sparse/

  gogaille:
    runs-on: ubuntu-latest

    steps:
      # 1st
      - uses: gogaille/sparse-checkout@v0
        with:
          patterns: 'docs packer'
      - run: ls -l
      
#       # 2nd
#       - uses: gogaille/sparse-checkout@v0
#         with:
#           patterns: 'docs packer'
#       - run: ls -l

  checkout:
    runs-on: ubuntu-latest

    steps:
#       # 1st
#       - uses: actions/checkout@v2
#       - run: ls -l
      
#       # 2nd
#       - uses: actions/checkout@v2
#       - run: ls -l
      
      # another
      - uses: actions/checkout@v2
        with:
          repository: snow-actions/tweet
      - run: ls -l
